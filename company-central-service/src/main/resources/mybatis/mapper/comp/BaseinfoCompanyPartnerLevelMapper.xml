<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ihappy.partner.infrastructure.repo.mybatis.mapper.BaseinfoCompanyPartnerLevelMapper">
  <resultMap id="BaseResultMap" type="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    <id column="partner_level_id" jdbcType="BIGINT" property="partnerLevelId" />
    <result column="comp_id" jdbcType="INTEGER" property="compId" />
    <result column="store_id" jdbcType="BIGINT" property="storeId" />
    <result column="partner_level" jdbcType="VARCHAR" property="partnerLevel" />
    <result column="partner_memo" jdbcType="VARCHAR" property="partnerMemo" />
    <result column="partner_type" jdbcType="BIT" property="partnerType" />
    <result column="discount" jdbcType="INTEGER" property="discount" />
    <result column="sort" jdbcType="INTEGER" property="sort" />
    <result column="created_at" jdbcType="BIGINT" property="createdAt" />
    <result column="updated_at" jdbcType="BIGINT" property="updatedAt" />
    <result column="created_person_id" jdbcType="BIGINT" property="createdPersonId" />
    <result column="updated_person_id" jdbcType="BIGINT" property="updatedPersonId" />
    <result column="is_deleted" property="isDeleted" />
    <result column="reference_count" property="referenceCount" />
    <result column="is_can_edit"  property="isCanEdit" />
    <result column="is_default"  property="isDefault" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    partner_level_id, comp_id, store_id, partner_level, partner_memo, partner_type, discount, 
    sort, created_at, updated_at, created_person_id, updated_person_id, is_deleted,reference_count,
    is_can_edit,is_default
  </sql>
  <update id="updateReferenceCount" parameterType="java.util.Map">
    UPDATE baseinfo_company_partner_level SET
    reference_count = #{operation}+reference_count
    where is_deleted = 0
    <if test="partnerLevelIds != null and partnerLevelIds.size > 0">
      and partner_level_id in
      <foreach collection="partnerLevelIds" item="item" open="(" separator="," close=")">
        #{item}
      </foreach>
    </if>
  </update>
  <update id="updateDelStatus" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    UPDATE baseinfo_company_partner_level SET
    is_deleted = 1,
    updated_at = #{updatedAt},
    updated_person_id = #{updatedPersonId}
    where partner_level_id = #{partnerLevelId} and comp_id = #{compId} and is_deleted = 0 and is_default = 0
  </update>

  <select id="selectPartnerLevelList" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from baseinfo_company_partner_level
    where is_deleted = 0 and comp_id = #{compId}
    <if test="partnerLevel != null and partnerLevel != ''">
      and partner_level like CONCAT(#{partnerLevel},'%')
    </if>
    order by partner_level
  </select>
  <select id="selectById" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    select
    <include refid="Base_Column_List" />
    from baseinfo_company_partner_level
    where partner_level_id = #{partnerLevelId} and is_deleted = 0
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from baseinfo_company_partner_level
    where partner_level_id = #{partnerLevelId,jdbcType=BIGINT} and is_deleted = 0
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    delete from baseinfo_company_partner_level
    where partner_level_id = #{partnerLevelId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    insert into baseinfo_company_partner_level (partner_level_id, comp_id, store_id, 
      partner_level, partner_memo, partner_type, 
      discount, sort, created_at, 
      updated_at, created_person_id, updated_person_id, 
      is_deleted,is_can_edit,is_default)
    values (#{partnerLevelId,jdbcType=BIGINT}, #{compId,jdbcType=INTEGER}, #{storeId,jdbcType=BIGINT}, 
      #{partnerLevel,jdbcType=VARCHAR}, #{partnerMemo,jdbcType=VARCHAR}, #{partnerType,jdbcType=BIT}, 
      #{discount,jdbcType=INTEGER}, #{sort,jdbcType=INTEGER}, #{createdAt,jdbcType=BIGINT}, 
      #{updatedAt,jdbcType=BIGINT}, #{createdPersonId,jdbcType=BIGINT}, #{updatedPersonId,jdbcType=BIGINT}, 
      #{isDeleted},#{isCanEdit},#{isDefault})
  </insert>
  <insert id="insertSelective" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    insert into baseinfo_company_partner_level
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="partnerLevelId != null">
        partner_level_id,
      </if>
      <if test="compId != null">
        comp_id,
      </if>
      <if test="storeId != null">
        store_id,
      </if>
      <if test="partnerLevel != null">
        partner_level,
      </if>
      <if test="partnerMemo != null">
        partner_memo,
      </if>
      <if test="partnerType != null">
        partner_type,
      </if>
      <if test="discount != null">
        discount,
      </if>
      <if test="sort != null">
        sort,
      </if>
      <if test="createdAt != null">
        created_at,
      </if>
      <if test="updatedAt != null">
        updated_at,
      </if>
      <if test="createdPersonId != null">
        created_person_id,
      </if>
      <if test="updatedPersonId != null">
        updated_person_id,
      </if>
      <if test="isDeleted != null">
        is_deleted,
      </if>
      <if test="isCanEdit != null">
        is_can_edit,
      </if>
      <if test="isDefault != null">
        is_default,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="partnerLevelId != null">
        #{partnerLevelId,jdbcType=BIGINT},
      </if>
      <if test="compId != null">
        #{compId,jdbcType=INTEGER},
      </if>
      <if test="storeId != null">
        #{storeId,jdbcType=BIGINT},
      </if>
      <if test="partnerLevel != null">
        #{partnerLevel,jdbcType=VARCHAR},
      </if>
      <if test="partnerMemo != null">
        #{partnerMemo,jdbcType=VARCHAR},
      </if>
      <if test="partnerType != null">
        #{partnerType,jdbcType=BIT},
      </if>
      <if test="discount != null">
        #{discount,jdbcType=INTEGER},
      </if>
      <if test="sort != null">
        #{sort,jdbcType=INTEGER},
      </if>
      <if test="createdAt != null">
        #{createdAt,jdbcType=BIGINT},
      </if>
      <if test="updatedAt != null">
        #{updatedAt,jdbcType=BIGINT},
      </if>
      <if test="createdPersonId != null">
        #{createdPersonId,jdbcType=BIGINT},
      </if>
      <if test="updatedPersonId != null">
        #{updatedPersonId,jdbcType=BIGINT},
      </if>
      <if test="isDeleted != null">
        #{isDeleted,jdbcType=BIT},
      </if>
      <if test="isCanEdit != null">
        #{isCanEdit},
      </if>
      <if test="isDefault != null">
        #{isDefault},
      </if>
    </trim>
  </insert>
  <select id="selectByCondition" resultMap="BaseResultMap" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    select
    <include refid="Base_Column_List" />
    from baseinfo_company_partner_level  where comp_id = #{compId} and is_deleted = 0
    <if test="partnerLevelId != null">
      and partner_level_id = #{partnerLevelId,jdbcType=BIGINT}
    </if>
    <if test="storeId != null">
      and store_id = #{storeId,jdbcType=BIGINT}
    </if>
    <if test="partnerLevel != null">
      and partner_level = #{partnerLevel,jdbcType=VARCHAR}
    </if>
    <if test="partnerMemo != null">
      and partner_memo = #{partnerMemo,jdbcType=VARCHAR}
    </if>
    <if test="partnerType != null">
      and partner_type = #{partnerType,jdbcType=BIT}
    </if>
    <if test="discount != null">
      and discount = #{discount,jdbcType=INTEGER}
    </if>
    <if test="sort != null">
      and sort = #{sort,jdbcType=INTEGER}
    </if>
    <if test="createdAt != null">
      and created_at = #{createdAt,jdbcType=BIGINT}
    </if>
    <if test="updatedAt != null">
      and updated_at = #{updatedAt,jdbcType=BIGINT}
    </if>
    <if test="createdPersonId != null">
      and created_person_id = #{createdPersonId,jdbcType=BIGINT}
    </if>
    <if test="updatedPersonId != null">
      and updated_person_id = #{updatedPersonId,jdbcType=BIGINT}
    </if>
    <if test="isCanEdit != null">
      and is_can_edit = #{isCanEdit}
    </if>
    <if test="isDefault != null">
      and is_default = #{isDefault}
    </if>
  </select>
  <select id="checkPartnerLevelName" resultMap="BaseResultMap" parameterType="com.ihappy.partner.domain.bo.level.CheckPartnerLevelBOByName">
    select
    <include refid="Base_Column_List" />
    from baseinfo_company_partner_level  where comp_id = #{compId}
    <if test="partnerLevelId != null">
      and partner_level_id != #{partnerLevelId,jdbcType=BIGINT}
    </if>
    <if test="partnerLevel != null">
      and partner_level = #{partnerLevel,jdbcType=VARCHAR}
    </if>
    <if test="isDeleted != null">
      and is_deleted = #{isDeleted}
    </if>
  </select>
  <update id="updateByPrimaryKeySelective" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    update baseinfo_company_partner_level
    <set>
      <if test="storeId != null">
        store_id = #{storeId,jdbcType=BIGINT},
      </if>
      <if test="partnerLevel != null">
        partner_level = #{partnerLevel,jdbcType=VARCHAR},
      </if>
      <if test="partnerMemo != null">
        partner_memo = #{partnerMemo,jdbcType=VARCHAR},
      </if>
      <if test="partnerType != null">
        partner_type = #{partnerType,jdbcType=BIT},
      </if>
      <if test="discount != null">
        discount = #{discount,jdbcType=INTEGER},
      </if>
      <if test="sort != null">
        sort = #{sort,jdbcType=INTEGER},
      </if>
      <if test="createdAt != null">
        created_at = #{createdAt,jdbcType=BIGINT},
      </if>
      <if test="updatedAt != null">
        updated_at = #{updatedAt,jdbcType=BIGINT},
      </if>
      <if test="createdPersonId != null">
        created_person_id = #{createdPersonId,jdbcType=BIGINT},
      </if>
      <if test="updatedPersonId != null">
        updated_person_id = #{updatedPersonId,jdbcType=BIGINT},
      </if>
      <if test="isCanEdit != null">
        is_can_edit = #{isCanEdit},
      </if>
      <if test="isDefault != null">
        is_default = #{isDefault},
      </if>
    </set>
    where partner_level_id = #{partnerLevelId,jdbcType=BIGINT} and comp_id = #{compId} and is_deleted = 0
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ihappy.partner.domain.dbdo.BaseinfoCompanyPartnerLevel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 13:23:57 CST 2018.
    -->
    update baseinfo_company_partner_level
    set comp_id = #{compId,jdbcType=INTEGER},
      store_id = #{storeId,jdbcType=BIGINT},
      partner_level = #{partnerLevel,jdbcType=VARCHAR},
      partner_memo = #{partnerMemo,jdbcType=VARCHAR},
      partner_type = #{partnerType,jdbcType=BIT},
      discount = #{discount,jdbcType=INTEGER},
      sort = #{sort,jdbcType=INTEGER},
      created_at = #{createdAt,jdbcType=BIGINT},
      updated_at = #{updatedAt,jdbcType=BIGINT},
      created_person_id = #{createdPersonId,jdbcType=BIGINT},
      updated_person_id = #{updatedPersonId,jdbcType=BIGINT},
      is_deleted = #{isDeleted},
      is_can_edit = #{isCanEdit},
      is_default = #{isDefault}
    where partner_level_id = #{partnerLevelId,jdbcType=BIGINT}
  </update>
</mapper>