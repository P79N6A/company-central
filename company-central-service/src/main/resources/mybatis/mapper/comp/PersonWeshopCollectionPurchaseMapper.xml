<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ihappy.store.infrastructure.repo.mybatis.mapper.weshop.PersonWeshopCollectionPurchaseMapper">
  <resultMap id="BaseResultMap" type="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    <id column="person_weshop_collection_purchase_id" jdbcType="BIGINT" property="personWeshopCollectionPurchaseId" />
    <result column="person_id" jdbcType="BIGINT" property="personId" />
    <result column="weshop_id" jdbcType="BIGINT" property="weshopId" />
    <result column="is_collected" jdbcType="BIT" property="isCollected" />
    <result column="is_purchased" jdbcType="BIT" property="isPurchased" />
    <result column="created_at" jdbcType="BIGINT" property="createdAt" />
    <result column="updated_at" jdbcType="BIGINT" property="updatedAt" />
    <result column="created_person_id" jdbcType="BIGINT" property="createdPersonId" />
    <result column="updated_person_id" jdbcType="BIGINT" property="updatedPersonId" />
    <result column="is_deleted" jdbcType="BIT" property="isDeleted" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    person_weshop_collection_purchase_id, person_id, weshop_id, is_collected, is_purchased, 
    created_at, updated_at, created_person_id, updated_person_id, is_deleted
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from person_weshop_collection_purchase
    where person_weshop_collection_purchase_id = #{personWeshopCollectionPurchaseId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    delete from person_weshop_collection_purchase
    where person_weshop_collection_purchase_id = #{personWeshopCollectionPurchaseId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    insert into person_weshop_collection_purchase (person_weshop_collection_purchase_id, person_id,
      weshop_id, is_collected, is_purchased, 
      created_at, updated_at, created_person_id, 
      updated_person_id, is_deleted)
    values (#{personWeshopCollectionPurchaseId,jdbcType=BIGINT}, #{personId,jdbcType=BIGINT}, 
      #{weshopId,jdbcType=BIGINT}, #{isCollected,jdbcType=BIT}, #{isPurchased,jdbcType=BIT}, 
      #{createdAt,jdbcType=BIGINT}, #{updatedAt,jdbcType=BIGINT}, #{createdPersonId,jdbcType=BIGINT}, 
      #{updatedPersonId,jdbcType=BIGINT}, #{isDeleted,jdbcType=BIT})
  </insert>
  <insert id="insertSelective" parameterType="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    insert into person_weshop_collection_purchase
    <trim prefix="(" suffix=")" suffixOverrides=",">
      person_id,
      <if test="personWeshopCollectionPurchaseId != null">
        person_weshop_collection_purchase_id,
      </if>
      <if test="weshopId != null">
        weshop_id,
      </if>
      <if test="isCollected != null">
        is_collected,
      </if>
      <if test="isPurchased != null">
        is_purchased,
      </if>
      <if test="createdAt != null">
        created_at,
      </if>
      <if test="updatedAt != null">
        updated_at,
      </if>
      <if test="createdPersonId != null">
        created_person_id,
      </if>
      <if test="updatedPersonId != null">
        updated_person_id,
      </if>
      <if test="isDeleted != null">
        is_deleted,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
        #{personId,jdbcType=BIGINT},
      <if test="personWeshopCollectionPurchaseId != null">
        #{personWeshopCollectionPurchaseId,jdbcType=BIGINT},
      </if>
      <if test="weshopId != null">
        #{weshopId,jdbcType=BIGINT},
      </if>
      <if test="isCollected != null">
        #{isCollected,jdbcType=BIT},
      </if>
      <if test="isPurchased != null">
        #{isPurchased,jdbcType=BIT},
      </if>
      <if test="createdAt != null">
        #{createdAt,jdbcType=BIGINT},
      </if>
      <if test="updatedAt != null">
        #{updatedAt,jdbcType=BIGINT},
      </if>
      <if test="createdPersonId != null">
        #{createdPersonId,jdbcType=BIGINT},
      </if>
      <if test="updatedPersonId != null">
        #{updatedPersonId,jdbcType=BIGINT},
      </if>
      <if test="isDeleted != null">
        #{isDeleted,jdbcType=BIT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    update person_weshop_collection_purchase
    <set>
      <if test="personId != null">
        person_id = #{personId,jdbcType=BIGINT},
      </if>
      <if test="weshopId != null">
        weshop_id = #{weshopId,jdbcType=BIGINT},
      </if>
      <if test="isCollected != null">
        is_collected = #{isCollected,jdbcType=BIT},
      </if>
      <if test="isPurchased != null">
        is_purchased = #{isPurchased,jdbcType=BIT},
      </if>
      <if test="createdAt != null">
        created_at = #{createdAt,jdbcType=BIGINT},
      </if>
      <if test="updatedAt != null">
        updated_at = #{updatedAt,jdbcType=BIGINT},
      </if>
      <if test="createdPersonId != null">
        created_person_id = #{createdPersonId,jdbcType=BIGINT},
      </if>
      <if test="updatedPersonId != null">
        updated_person_id = #{updatedPersonId,jdbcType=BIGINT},
      </if>
      <if test="isDeleted != null">
        is_deleted = #{isDeleted,jdbcType=BIT},
      </if>
    </set>
    where person_weshop_collection_purchase_id = #{personWeshopCollectionPurchaseId,jdbcType=BIGINT}
  </update>



  <update id="updateByPrimaryKey" parameterType="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 17 21:05:12 CST 2018.
    -->
    update person_weshop_collection_purchase
    set person_id = #{personId,jdbcType=BIGINT},
      weshop_id = #{weshopId,jdbcType=BIGINT},
      is_collected = #{isCollected,jdbcType=BIT},
      is_purchased = #{isPurchased,jdbcType=BIT},
      created_at = #{createdAt,jdbcType=BIGINT},
      updated_at = #{updatedAt,jdbcType=BIGINT},
      created_person_id = #{createdPersonId,jdbcType=BIGINT},
      updated_person_id = #{updatedPersonId,jdbcType=BIGINT},
      is_deleted = #{isDeleted,jdbcType=BIT}
    where person_weshop_collection_purchase_id = #{personWeshopCollectionPurchaseId,jdbcType=BIGINT}
  </update>

  <!--<select id="selectPersonGestureList" parameterType="com.ihappy.company.domain.dto.request.user.PersonGestureReqDTO" resultMap="BaseResultMap">-->
  <!--select-->
  <!--<include refid="Base_Column_List" />-->
  <!--from person_weshop_collection_purchase-->
  <!--where-->
  <!--person_id = #{personId,jdbcType=BIGINT},-->
  <!--<if test="isCollected != null">-->
    <!--and is_collected = #{isCollected,jdbcType=BIT},-->
  <!--</if>-->
  <!--<if test="isPurchased != null">-->
    <!--and is_purchased = #{isPurchased,jdbcType=BIT},-->
  <!--</if>-->
  <!--<if test="limit != null and offset != null " >-->
    <!--limit #{limit} offset #{offset}-->
  <!--</if>-->

<!--</select>-->


  <select id="selectPersonGestureList" parameterType="com.ihappy.company.domain.dto.request.user.PersonGestureReqDTO" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from person_weshop_collection_purchase
    where
    person_id = #{personId,jdbcType=BIGINT}
    <if test="isCollected != null">
      and is_collected = #{isCollected,jdbcType=BIT}
    </if>
    <if test="isPurchased != null">
      and is_purchased = #{isPurchased,jdbcType=BIT}
    </if>
    <if test="weshopIds != null and weshopIds.size > 0">
      and weshop_id in
      <foreach collection="weshopIds" open="(" separator="," close=")" item="weshopId">
        #{weshopId}
      </foreach>
    </if>
    <if test="limit != null and offset != null " >
      limit #{limit} offset #{offset}
    </if>

  </select>

  <update id="updatePersonCollectionStatus" parameterType="com.ihappy.store.domain.dbdo.weshop.PersonWeshopCollectionPurchase">

    update person_weshop_collection_purchase
    <set>
      <if test="isCollected != null">
        is_collected = #{isCollected,jdbcType=BIT},
      </if>
      <if test="isPurchased != null">
        is_purchased = #{isPurchased,jdbcType=BIT},
      </if>
      <if test="updatedAt != null">
        updated_at = #{updatedAt,jdbcType=BIGINT},
      </if>
      <if test="updatedPersonId != null">
        updated_person_id = #{updatedPersonId,jdbcType=BIGINT},
      </if>
    </set>
    where person_id = #{personId,jdbcType=BIGINT}
        and weshop_id = #{weshopId,jdbcType=BIGINT}
  </update>

</mapper>